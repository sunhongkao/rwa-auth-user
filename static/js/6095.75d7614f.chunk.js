"use strict";(self.webpackChunkprivy_atuh=self.webpackChunkprivy_atuh||[]).push([[6095],{50553(e,t,a){a.d(t,{A:()=>r});const r=(0,a(72167).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},76095(e,t,a){a.r(t),a.d(t,{CaptchaScreen:()=>d,CaptchaScreenView:()=>l,default:()=>d});var r=a(85089),n=a(50553),s=a(2154),i=a(58661),u=a(97916),o=a(52034),c=a(99743);a(99130),a(72025),a(15546),a(15656),a(56348);const l=e=>{let{status:t,title:a,description:u,userIntentRequired:o,retriesRemaining:l,hasSelectedCta:d,onContinue:v,onRetry:h}=e,g=(0,i.useMemo)(()=>{switch(t){case"loading":default:return;case"success":return o?{label:d?"Continuing...":"Continue",onClick:v,disabled:d,loading:d}:void 0;case"error":return l>0?{label:"Retry",onClick:h}:void 0}},[t,d,v,h]),y=(0,i.useMemo)(()=>({loading:"loading",ready:"subtle",disabled:"subtle",success:"success",error:"error"}[t]||"loading"),[t]);return(0,r.jsx)(c.S,{icon:"loading"===t||"ready"===t?void 0:"success"===t?n.A:s.A,iconVariant:y,title:a,subtitle:u,primaryCta:g,watermark:!0})},d={component:()=>{let{lastScreen:e,data:t,navigate:a,setModalData:n}=(0,o.a)(),{status:s,token:c,waitForResult:d,reset:v,execute:h}=(0,u.a)(),g=(0,i.useRef)([]),y=e=>{g.current=[e,...g.current]},[p,C]=(0,i.useState)(!0);(0,i.useEffect)(()=>(y(setTimeout(C,1e3,!1)),()=>{g.current.forEach(e=>clearTimeout(e)),g.current=[]}),[]);let[f,S]=(0,i.useState)(""),[k,m]=(0,i.useState)("Checking that you are a human..."),[b,R]=(0,i.useState)(!1),[w,T]=(0,i.useState)(3),A=null===t||void 0===t?void 0:t.captchaModalData,I=async t=>{try{await(null===A||void 0===A?void 0:A.callback(t)),(null===A||void 0===A?void 0:A.onSuccessNavigateTo)&&a(null===A||void 0===A?void 0:A.onSuccessNavigateTo,!1)}catch(t){if(t instanceof u.C)return;n({errorModalData:{error:t,previousScreen:e||"LandingScreen"}}),a((null===A||void 0===A?void 0:A.onErrorNavigateTo)||"ErrorScreen",!1)}};return(0,i.useEffect)(()=>{"success"===s?y(setTimeout(async()=>{let e=await d();!e||(null===A||void 0===A?void 0:A.userIntentRequired)||I(e)},1e3)):"ready"===s&&y(setTimeout(()=>{"ready"===s&&h()},500))},[s]),(0,i.useEffect)(()=>{if(!p)switch(s){case"success":S("Success!"),m("CAPTCHA passed successfully."),(null===A||void 0===A?void 0:A.userIntentRequired)||setTimeout(()=>{R(!0),I(c)},2e3);break;case"loading":S(""),m("Checking that you are a human...");break;case"error":S("Something went wrong"),m(w<=0?"If you use an adblocker or VPN, try disabling and re-attempting.":"You did not pass CAPTCHA. Please try again.")}},[s,p,b]),(0,r.jsx)(l,{status:s,title:f,description:k,userIntentRequired:null===A||void 0===A?void 0:A.userIntentRequired,retriesRemaining:w,hasSelectedCta:b,onContinue:()=>{R(!0),I(c)},onRetry:async()=>{if(w<=0)return;T(e=>e-1),v(),h();let e=await d();!e||(null===A||void 0===A?void 0:A.userIntentRequired)||I(e)}})}}}}]);