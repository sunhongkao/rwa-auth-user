"use strict";(self.webpackChunkprivy_atuh=self.webpackChunkprivy_atuh||[]).push([[5915],{4661(n,t,e){e.d(t,{a:()=>d,b:()=>m,c:()=>s,g:()=>c,p:()=>u,s:()=>p});var o=e(82203),i=e(14766),a=e(13800);let r=new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:2}),l=n=>r.format(n);const s=(n,t)=>{let e=l(t*parseFloat(n));return"$0.00"!==e?e:"<$0.01"},d=(n,t)=>{let e=l(t*parseFloat((0,o.c)(n)));return"$0.00"===e?"<$0.01":e},c=function(n,t){return"".concat(u(n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,arguments.length>3&&void 0!==arguments[3]&&arguments[3])," ").concat(t)},u=function(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=parseFloat((0,o.c)(n)).toFixed(t).replace(/0+$/,"").replace(/\.$/,"");return e?i:"".concat("0"===i?"<0.001":i)},p=n=>n.reduce((n,t)=>n+t,0n),m=(n,t)=>{let{chains:e}=(0,i.u)(),o="https://etherscan.io/address/".concat(t),r="".concat((0,a.a5)(n,e),"/address/").concat(t);if(!r)return o;try{new URL(r)}catch(l){return o}return r}},7444(n,t,e){e.d(t,{a:()=>a,g:()=>i});var o=e(80442);function i(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(parseFloat(n.toString())/1e9).toFixed(t).replace(/0+$/,"").replace(/\.$/,""),a=o?"":" SOL";return e?"".concat(i).concat(a):"".concat("0"===i?"<0.001":i).concat(a)}function a(n){let{amount:t,fee:e,tokenPrice:a,isUsdc:r}=n,l=BigInt(Math.floor(parseFloat(t)*10**(r?6:9))),s=r?l:l+e;return{fundingAmountInBaseUnit:l,fundingAmountInUsd:a?(0,o.g)(l,a):void 0,totalPriceInUsd:a?(0,o.g)(s,a):void 0,totalPriceInNativeCurrency:i(s),feePriceInNativeCurrency:i(e),feePriceInUsd:a?(0,o.g)(e,a):void 0}}},14145(n,t,e){e.d(t,{B:()=>i,C:()=>l,F:()=>d,H:()=>r,R:()=>m,S:()=>u,a:()=>c,b:()=>p,c:()=>s,d:()=>v,e:()=>a});var o=e(1754);const i=o.I4.div.withConfig({displayName:"BottomPusherContainer",componentId:"sc-cb963810-0"})(["display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-end;margin-top:auto;gap:16px;flex-grow:100;"]),a=o.I4.div.withConfig({displayName:"CenteredItem",componentId:"sc-cb963810-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;flex-grow:1;width:100%;"]),r=o.I4.div.withConfig({displayName:"HorizontallyCenteredItem",componentId:"sc-cb963810-2"})(["display:flex;flex-direction:column;align-items:center;width:100%;"]),l=(0,o.I4)(a).withConfig({displayName:"CenteredItemWithPadding",componentId:"sc-cb963810-3"})(["padding:20px 0;"]),s=(0,o.I4)(a).withConfig({displayName:"CenteredItemWithGap",componentId:"sc-cb963810-4"})(["gap:16px;"]),d=o.I4.div.withConfig({displayName:"FlexContainer",componentId:"sc-cb963810-5"})(["display:flex;flex-direction:column;width:100%;"]),c=o.I4.div.withConfig({displayName:"FixedGappedContainer",componentId:"sc-cb963810-6"})(["display:flex;flex-direction:column;gap:8px;"]),u=o.I4.div.withConfig({displayName:"StyledCalloutSection",componentId:"sc-cb963810-8"})(["display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;text-align:left;gap:8px;padding:16px;margin-top:16px;margin-bottom:16px;width:100%;background:var(--privy-color-background-2);border-radius:var(--privy-border-radius-md);&& h4{color:var(--privy-color-foreground-3);font-size:14px;text-decoration:underline;font-weight:medium;}&& p{color:var(--privy-color-foreground-3);font-size:14px;}"]),p=o.I4.div.withConfig({displayName:"RefactorSpacerTop",componentId:"sc-cb963810-9"})(["height:16px;"]),m=o.I4.div.withConfig({displayName:"RefactorSpacerBottom",componentId:"sc-cb963810-10"})(["height:12px;"]),v=o.I4.div.withConfig({displayName:"ConfigurableSpacer",componentId:"sc-cb963810-12"})(["height:","px;"],n=>{var t;return null!==(t=n.height)&&void 0!==t?t:"12"})},15282(n,t,e){e.d(t,{A:()=>l});var o=e(15882),i=e(58661);const a=["title","titleId"];function r(n,t){let{title:e,titleId:r}=n,l=(0,o.A)(n,a);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const l=i.forwardRef(r)},16850(n,t,e){e.d(t,{e:()=>o});let o=e(1754).I4.div.withConfig({displayName:"StackedContainer",componentId:"sc-f7e7d474-0"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:82px;> div{position:relative;}> div > span{position:absolute;left:-41px;top:-41px;}> div > :last-child{position:absolute;left:-19px;top:-19px;}"])},17939(n,t,e){e.d(t,{a:()=>d,b:()=>p,f:()=>c,s:()=>u,u:()=>f,w:()=>m});var o=e(86639),i=e(67972),a=e(72621),r=e(58661),l=e(87931),s=e(14766);function d(n){return new Uint8Array((0,a.BX)().decode(n).messageBytes)}async function c(n){let{solanaClient:t,tx:e}=n,o=(0,i.Ul)().decode(d(e)),{value:a}=await t.rpc.getFeeForMessage(o).send();return null!==a&&void 0!==a?a:0n}async function u(n){var t,e,o;let{solanaClient:a,tx:r,replaceRecentBlockhash:l}=n,{value:s}=await a.rpc.simulateTransaction((0,i.Ul)().decode(r),{commitment:"confirmed",encoding:"base64",sigVerify:!1,replaceRecentBlockhash:l}).send();if("BlockhashNotFound"===s.err&&l)throw Error("Simulation failed: Blockhash not found");return"BlockhashNotFound"===s.err?await u({solanaClient:a,tx:r,replaceRecentBlockhash:!0}):{logs:null!==(t=s.logs)&&void 0!==t?t:[],error:s.err,hasError:!!s.err,hasFunds:null===(e=null===(o=s.logs)||void 0===o?void 0:o.every(n=>!/insufficient funds/gi.test(n)&&!/insufficient lamports/gi.test(n)))||void 0===e||e}}const p=function(){if("undefined"==typeof Buffer)throw new s.a("Buffer is not defined.",void 0,s.b.BUFFER_NOT_DEFINED);return Buffer.from(...arguments)};async function m(n){let{rpcSubscriptions:t,signature:e,timeout:i}=n,a=new AbortController,r=await t.signatureNotifications(e,{commitment:"confirmed"}).subscribe({abortSignal:a.signal}),l=await Promise.race([new Promise(n=>{setTimeout(()=>{a.abort(),n(Error("Transaction confirmation timed out"))},i)}),new Promise(async n=>{var t,e=!1,i=!1;try{for(var l,s=(0,o.A)(r);e=!(l=await s.next()).done;e=!1){let t=l.value;if(a.abort(),t.value.err)return n(Error("Transaction confirmation failed"));n(void 0)}}catch(d){i=!0,t=d}finally{try{e&&null!=s.return&&await s.return()}finally{if(i)throw t}}})]);if(l instanceof Error)throw l}function v(n){let{rpc:t,rpcSubscriptions:e,chain:o,blockExplorerUrl:a}=n,r=function(n){let{rpc:t,rpcSubscriptions:e}=n;return async n=>new Promise(async(o,a)=>{try{let a=await t.sendTransaction(p(n).toString("base64"),{preflightCommitment:"confirmed",encoding:"base64"}).send();await m({rpcSubscriptions:e,signature:a,timeout:1e4}),o({signature:new Uint8Array((0,i.nZ)().encode(a))})}catch(t){a(t)}})}({rpc:t,rpcSubscriptions:e});return{rpc:t,rpcSubscriptions:e,chain:o,blockExplorerUrl:a,sendAndConfirmTransaction:r}}function f(){let n=(0,l.u)(),t=(0,r.useMemo)(()=>Object.fromEntries(["solana:mainnet","solana:devnet","solana:testnet"].map(t=>{var e;return[t,n.solanaRpcs[t]?v({chain:t,rpc:n.solanaRpcs[t].rpc,rpcSubscriptions:n.solanaRpcs[t].rpcSubscriptions,blockExplorerUrl:null!==(e=n.solanaRpcs[t].blockExplorerUrl)&&void 0!==e?e:"https://explorer.solana.com?cluster=".concat(t.replace("solana:",""))}):null]})),[n.solanaRpcs]);return(0,r.useCallback)(n=>{if(!t[n])throw Error("No RPC configuration found for chain ".concat(n));return t[n]},[t])}},34623(n,t,e){e.d(t,{H:()=>c,P:()=>u,S:()=>p,W:()=>y});var o=e(85089),i=e(1754),a=e(92072),r=e(4661),l=e(80442),s=e(7444),d=e(13800);const c=n=>{let{weiQuantities:t,tokenPrice:e,tokenSymbol:i}=n,a=(0,r.s)(t),l=e?(0,r.a)(a,e):void 0,s=(0,r.g)(a,i);return(0,o.jsx)(m,{children:l||s})},u=n=>{let{weiQuantities:t,tokenPrice:e,tokenSymbol:i}=n,a=(0,r.s)(t),l=e?(0,r.a)(a,e):void 0,s=(0,r.g)(a,i);return(0,o.jsx)(m,{children:l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(v,{children:"USD"}),"<$0.01"===l?(0,o.jsxs)(g,{children:[(0,o.jsx)(f,{children:"<"}),"$0.01"]}):l]}):s})},p=n=>{let{quantities:t,tokenPrice:e,tokenSymbol:i="SOL",tokenDecimals:r=9}=n,d=t.reduce((n,t)=>n+t,0n),c=e&&"SOL"===i&&9===r?(0,l.g)(d,e):void 0,u="SOL"===i&&9===r?(0,s.g)(d):"".concat((0,a.J)(d,r)," ").concat(i);return(0,o.jsx)(m,{children:c?(0,o.jsx)(o.Fragment,{children:"<$0.01"===c?(0,o.jsxs)(g,{children:[(0,o.jsx)(f,{children:"<"}),"$0.01"]}):c}):u})};let m=i.I4.span.withConfig({displayName:"StyledPriceDisplay",componentId:"sc-3cd56c8a-0"})(["font-size:14px;line-height:140%;display:flex;gap:4px;align-items:center;"]),v=i.I4.span.withConfig({displayName:"StyledPriceUnit",componentId:"sc-3cd56c8a-1"})(["font-size:12px;line-height:12px;color:var(--privy-color-foreground-3);"]),f=i.I4.span.withConfig({displayName:"TinyLessThan",componentId:"sc-3cd56c8a-2"})(["font-size:10px;"]),g=i.I4.span.withConfig({displayName:"FlexCenter",componentId:"sc-3cd56c8a-3"})(["display:flex;align-items:center;"]);function h(n,t){return"https://explorer.solana.com/account/".concat(n,"?chain=").concat(t)}const y=n=>(0,o.jsx)(w,{href:"ethereum"===n.chainType?(0,r.b)(n.chainId,n.walletAddress):h(n.walletAddress,n.chainId),target:"_blank",children:(0,d.D)(n.walletAddress)});let w=i.I4.a.withConfig({displayName:"StyledLink",componentId:"sc-dd6c0f9f-0"})(["&:hover{text-decoration:underline;}"])},57392(n,t,e){e.d(t,{A:()=>l});var o=e(15882),i=e(58661);const a=["title","titleId"];function r(n,t){let{title:e,titleId:r}=n,l=(0,o.A)(n,a);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const l=i.forwardRef(r)},79787(n,t,e){e.d(t,{A:()=>l});var o=e(15882),i=e(58661);const a=["title","titleId"];function r(n,t){let{title:e,titleId:r}=n,l=(0,o.A)(n,a);return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const l=i.forwardRef(r)},80442(n,t,e){e.d(t,{A:()=>l,D:()=>c,J:()=>d,L:()=>o,R:()=>s,S:()=>i,T:()=>a,a:()=>r,g:()=>u});const o=1e9,i="11111111111111111111111111111111",a="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",r="TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb",l="ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",s=["CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C","CPMDWBwJDtYax9qW7AyRuVC19Cc4L4Vcy4n2BHAbHkCW"],d=["JUP6LkbZbjS1jKKwapdHNy74zcZ3tLUZoi5QNyVTaV4"],c={"solana:mainnet":{EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v:{symbol:"USDC",decimals:6,address:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"},Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB:{symbol:"USDT",decimals:6,address:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"},So11111111111111111111111111111111111111112:{symbol:"SOL",decimals:9,address:"So11111111111111111111111111111111111111112"}},"solana:devnet":{"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU":{symbol:"USDC",decimals:6,address:"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU"},EJwZgeZrdC8TXTQbQBoL6bfuAnFUUy1PVCMB4DYPzVaS:{symbol:"USDT",decimals:6,address:"EJwZgeZrdC8TXTQbQBoL6bfuAnFUUy1PVCMB4DYPzVaS"},So11111111111111111111111111111111111111112:{symbol:"SOL",decimals:9,address:"So11111111111111111111111111111111111111112"}},"solana:testnet":{}};function u(n,t){let e=parseFloat(n.toString())/o,i=p.format(t*e);return"$0.00"===i?"<$0.01":i}let p=new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:2})},90597(n,t,e){e.r(t),e.d(t,{StandardSignAndSendTransactionScreen:()=>K,default:()=>K});var o=e(24107),i=e(85089),a=e(58661),r=e(72619),l=e(52034),s=e(87931),d=e(14766),c=e(94199),u=e(32308),p=e(79787),m=e(1754),v=e(39736),f=e(14145),g=e(44271),h=e(62754),y=e(5138),w=e(74777),b=e(34623),x=e(16850),S=e(13800),k=e(28735),I=e(7444),A=e(76773),C=e(15882),j=e(54674),T=e(67972);const E=["abortSignal"];function O(n){return!("exists"in n)||"exists"in n&&n.exists}function F(n,t){if(!t)return Object.freeze({address:n,exists:!1});const e=(0,T.Iz)().encode(t.data[0]);return Object.freeze((0,o.A)((0,o.A)({},N(t)),{},{address:n,data:e,exists:!0}))}function P(n,t){if(!t)return Object.freeze({address:n,exists:!1});const e=t.data.parsed.info;return Object.freeze((0,o.A)((0,o.A)({},N(t)),{},{address:n,data:e,exists:!0}))}function N(n){return Object.freeze({executable:n.executable,lamports:n.lamports,programAddress:n.owner,space:n.space})}async function L(n,t,e){if(0===n.length)return{};const i=await async function(n,t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{abortSignal:i}=e,a=(0,C.A)(e,E);return(await n.getMultipleAccounts(t,(0,o.A)((0,o.A)({},a),{},{encoding:"jsonParsed"})).send({abortSignal:i})).value.map((n,e)=>n&&"object"===typeof n&&"parsed"in n.data?P(t[e],n):F(t[e],n))}(t,n,e);return function(n){const t=n.filter(n=>O(n)&&n.data instanceof Uint8Array);if(t.length>0){const n=t.map(n=>n.address);throw new j.tsw(j.sf7,{addresses:n})}}(i),function(n){const t=n.filter(n=>!n.exists);if(t.length>0){const n=t.map(n=>n.address);throw new j.tsw(j.mMN,{addresses:n})}}(i),i.reduce((n,t)=>(0,o.A)((0,o.A)({},n),{},{[t.address]:t.data.addresses}),{})}var B=e(44294),U=e(72621),J=e(17939),D=e(80442);e(72025),e(99130),e(15546),e(15656),e(56348);const R=m.I4.span.withConfig({displayName:"CircleBackground",componentId:"sc-c9f33cd-0"})(["&&{width:82px;height:82px;border-width:4px;border-style:solid;border-color:",";background-color:",";border-radius:50%;display:inline-block;box-sizing:border-box;}"],n=>{var t;return null!==(t=n.color)&&void 0!==t?t:"var(--privy-color-accent)"},n=>{var t;return null!==(t=n.color)&&void 0!==t?t:"var(--privy-color-accent)"}),M=n=>{let{instruction:t,fees:e,transactionInfo:o,solPrice:a,chain:r}=n;return(0,i.jsxs)(y.a,{children:[(null===o||void 0===o?void 0:o.action)&&(0,i.jsxs)(y.R,{children:[(0,i.jsx)(w.L,{children:"Action"}),(0,i.jsx)(w.V,{children:o.action})]}),null!=(null===t||void 0===t?void 0:t.total)&&(0,i.jsxs)(y.R,{children:[(0,i.jsx)(w.L,{children:"Total"}),(0,i.jsx)(w.V,{children:t.total})]}),!(null!==t&&void 0!==t&&t.total)&&null!=(null===t||void 0===t?void 0:t.amount)&&(0,i.jsxs)(y.R,{children:[(0,i.jsx)(w.L,{children:"Total"}),(0,i.jsx)(w.V,{children:(0,i.jsx)(b.S,{quantities:[t.amount,e],tokenPrice:a})})]}),(0,i.jsxs)(y.R,{children:[(0,i.jsx)(w.L,{children:"Fees"}),(0,i.jsx)(w.V,{children:(0,i.jsx)(b.S,{quantities:[e],tokenPrice:a})})]}),(null===t||void 0===t?void 0:t.to)&&(0,i.jsxs)(y.R,{children:[(0,i.jsx)(w.L,{children:"To"}),(0,i.jsx)(w.V,{children:(0,i.jsx)(b.W,{walletAddress:t.to,chainId:r,chainType:"solana"})})]})]})},_=n=>{let{fees:t,onClose:e,receiptHeader:o,receiptDescription:a,transactionInfo:r,solPrice:l,signOnly:s,instruction:d,chain:c}=n;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.M,{onClose:e}),(0,i.jsx)(x.e,{style:{marginBottom:"16px"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)(R,{color:"var(--privy-color-success-light)"}),(0,i.jsx)(p.A,{height:38,width:38,strokeWidth:2,stroke:"var(--privy-color-success)"})]})}),(0,i.jsx)(h.C,{title:null!==o&&void 0!==o?o:"Transaction ".concat(s?"signed":"complete","!"),description:null!==a&&void 0!==a?a:"You're all set."}),(0,i.jsx)(M,{solPrice:l,instruction:d,fees:t,transactionInfo:r,chain:c}),(0,i.jsx)(S.Y,{}),(0,i.jsx)(z,{loading:!1,onClick:e,children:"Close"}),(0,i.jsx)(f.R,{}),(0,i.jsx)(g.B,{})]})};let z=(0,m.I4)(v.P).withConfig({displayName:"SubmitButton",componentId:"sc-3cb7ee42-0"})(["&&{margin-top:24px;}transition:color 350ms ease,background-color 350ms ease;"]);async function W(n,t){try{return await n}catch(e){return t}}function V(n){switch(n){case"solana:mainnet":return"mainnet-beta";case"solana:devnet":return"devnet";case"solana:testnet":return"testnet"}}async function q(n){let{privyClient:t,chain:e,mint:o}=n,i=D.D[e];if(!i[o]){let n=await t.getSplTokenMetadata({mintAddress:o,cluster:V(e)});n&&(i[o]={address:o,symbol:n.symbol,decimals:n.decimals})}return i[o]}async function H(n){var t,e;let{tx:o,solanaClient:i,privyClient:a,checkFunds:r}=n,l=(0,A.fr)().decode((0,J.a)(o)),s=null!==(t=l.staticAccounts[0])&&void 0!==t?t:"",d=await(0,J.f)({solanaClient:i,tx:o}),c=r?await W((0,J.s)({solanaClient:i,tx:o})):void 0,u=null===(e=null===c||void 0===c?void 0:c.hasFunds)||void 0===e||e,p={},m=[],v=await async function(n){let{solanaClient:t,message:e}=n;if(!("addressTableLookups"in e)||!e.addressTableLookups)return[...e.staticAccounts];let o=e.addressTableLookups.map(n=>n.lookupTableAddress),i=await L(o,t.rpc),a=o.map((n,t)=>{var o,a,r,l;return[...null!==(o=null===(a=e.addressTableLookups[t])||void 0===a?void 0:a.writableIndexes.map(e=>{var o;let a=null===(o=i[n])||void 0===o?void 0:o[e];if(a)return{key:a,isWritable:!0,altIdx:t}}))&&void 0!==o?o:[],...null!==(r=null===(l=e.addressTableLookups[t])||void 0===l?void 0:l.readonlyIndexes.map(e=>{var o;let a=null===(o=i[n])||void 0===o?void 0:o[e];if(a)return{key:a,isWritable:!1,altIdx:t}}))&&void 0!==r?r:[]]}).flat().filter(n=>!!n).sort((n,t)=>n.isWritable!==t.isWritable?n.isWritable?-1:1:n.altIdx-t.altIdx).map(n=>{let{key:t}=n;return t});return[...e.staticAccounts,...a]}({solanaClient:i,message:l});for(let A of l.instructions){let n=l.staticAccounts[A.programAddressIndex]||"";if(n!==D.T&&n!==D.a)if(n!==D.S){var f;if(n===D.A){let t=await W(function(n,t,e,o,i){let[a,r,l,s]=null!==(o=null===(i=n.accountIndices)||void 0===i?void 0:i.map(n=>t[n]))&&void 0!==o?o:[];return{type:"ata-creation",program:e,payer:a,ata:r,owner:l,mint:s}}(A,v,n));if(!t){var g;m.push({type:"unknown",program:n,discriminator:null===(g=A.data)||void 0===g?void 0:g[0]});continue}if(m.push(t),t.ata&&t.owner&&t.mint){p[t.ata]={owner:t.owner,mint:t.mint};continue}}if(D.R.includes(n)){let t=await W(Y(A,v,i,a,n));if(!t){var h;m.push({type:"unknown",program:n,discriminator:null===(h=A.data)||void 0===h?void 0:h[0]});continue}m.push(t)}else if(D.J.includes(n)){let t=await W(Q(A,v,i,a,n));if(!t){var y;m.push({type:"unknown",program:n,discriminator:null===(y=A.data)||void 0===y?void 0:y[0]});continue}m.push(t)}else m.push({type:"unknown",program:n,discriminator:null===(f=A.data)||void 0===f?void 0:f[0]})}else{let t=await W($(A,v));if(!t){var w;m.push({type:"unknown",program:n,discriminator:null===(w=A.data)||void 0===w?void 0:w[0]});continue}m.push(t)}else{var b,x,S,k;let t=await W(G(A,v,i,a,p,n));if(!t){var I;m.push({type:"unknown",program:n,discriminator:null===(I=A.data)||void 0===I?void 0:I[0]});continue}m.push(t),"spl-transfer"===t.type&&(t.fromAta&&t.fromAccount&&t.token.address&&(null!==(x=p[b=t.fromAta])&&void 0!==x||(p[b]={owner:t.fromAccount,mint:t.token.address})),t.toAta&&t.toAccount&&t.token.address&&(null!==(k=p[S=t.toAta])&&void 0!==k||(p[S]={owner:t.toAccount,mint:t.token.address})))}}return{spender:s,fee:d,instructions:m,hasFunds:!!u}}function Z(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{return function(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=0n;for(let o=0;o<8;o++)e|=BigInt(n[t+o])<<BigInt(8*o);return e}(n,t)}catch(o){}try{return n.readBigInt64LE(t)}catch(i){}let e=(0,J.b)(n);try{return function(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=n[t],o=n[t+7];if(!e||!o)throw Error("Buffer offset out of range: first: ".concat(e,", last: ").concat(o,"."));return(BigInt(n[t+4]+256*n[t+5]+65536*n[t+6]+(o<<24))<<32n)+BigInt(e+256*n[++t]+65536*n[++t]+16777216*n[++t])}(e)}catch(a){}try{return e.subarray(t).readBigInt64LE()}catch(r){}try{return e.readBigInt64LE(t)}catch(l){}return 0n}async function G(n,t,e,o,i,a){var r,l,s;let d=null===(r=n.data)||void 0===r?void 0:r[0],c=null!==(l=null===(s=n.accountIndices)||void 0===s?void 0:s.map(n=>t[n]))&&void 0!==l?l:[];if(1===d){let[n,t,e]=c;return{type:"spl-init-account",program:a,account:n,mint:t,owner:e}}if(3===d){var u,p;let t,r,[l,s,d]=c,x="",S=s?i[s]:void 0;if(S)t=S.owner,x=S.mint;else if(s){var m,v,f,g,h;let n=null===(m=(await e.rpc.getAccountInfo(s,{commitment:"confirmed",encoding:"jsonParsed"}).send()).value)||void 0===m?void 0:m.data;t=null===n||void 0===n||null===(v=n.parsed)||void 0===v||null===(v=v.info)||void 0===v?void 0:v.owner,x=null!==(f=null===n||void 0===n||null===(g=n.parsed)||void 0===g||null===(g=g.info)||void 0===g?void 0:g.mint)&&void 0!==f?f:"",r=null===n||void 0===n||null===(h=n.parsed)||void 0===h||null===(h=h.info)||void 0===h||null===(h=h.tokenAmount)||void 0===h?void 0:h.decimals}if(!x&&l){var y,w,b;let n=null===(y=(await e.rpc.getAccountInfo(l,{commitment:"confirmed",encoding:"jsonParsed"}).send()).value)||void 0===y?void 0:y.data;x=null!==(w=null===n||void 0===n||null===(b=n.parsed)||void 0===b||null===(b=b.info)||void 0===b?void 0:b.mint)&&void 0!==w?w:""}let k=await q({privyClient:o,chain:e.chain,mint:x}),I=null!==(u=null===k||void 0===k?void 0:k.symbol)&&void 0!==u?u:"";return null!==r&&void 0!==r||(r=null!==(p=null===k||void 0===k?void 0:k.decimals)&&void 0!==p?p:9),{type:"spl-transfer",program:a,fromAta:l,fromAccount:d,toAta:s,toAccount:t,value:Z(n.data,1),token:{symbol:I,decimals:r,address:x}}}if(9===d){let[n,t,e]=c;return{type:"spl-close-account",program:a,source:n,destination:t,owner:e}}if(17===d)return{type:"spl-sync-native",program:a};throw Error("Token program instruction type ".concat(d," not supported"))}async function $(n,t){var e,o,i;let a=null===(e=n.data)||void 0===e?void 0:e[0],r=null!==(o=null===(i=n.accountIndices)||void 0===i?void 0:i.map(n=>t[n]))&&void 0!==o?o:[];if(0===a){let[,t]=r;return{type:"create-account",program:D.S,account:null===t||void 0===t?void 0:t.toString(),value:Z(n.data,4),withSeed:!1}}if(2===a){let[t,e]=r;return{type:"sol-transfer",program:D.S,fromAccount:t,toAccount:e,token:{symbol:"SOL",decimals:9},value:Z(n.data,4),withSeed:!1}}if(3===a){let[,t]=r;return{type:"create-account",program:D.S,account:t,withSeed:!0,value:Z(n.data.slice(n.data.length-32-8-8))}}if(11===a){let[t,e]=r;return{type:"sol-transfer",program:D.S,fromAccount:t,toAccount:e,value:Z(n.data,4),token:{symbol:"SOL",decimals:9},withSeed:!0}}throw Error("System program instruction type ".concat(a," not supported"))}async function Y(n,t,e,o,i){var a,r,l;let s=null!==(a=null===(r=n.accountIndices)||void 0===r?void 0:r.map(n=>t[n]))&&void 0!==a?a:[],d=null===(l=n.data)||void 0===l?void 0:l[0];if(143===d){let t=s[10],a=s[11];return{type:"raydium-swap-base-input",program:i,mintIn:t,mintOut:a,tokenIn:t?await q({privyClient:o,chain:e.chain,mint:t}):void 0,tokenOut:a?await q({privyClient:o,chain:e.chain,mint:a}):void 0,amountIn:Z(n.data,8),minimumAmountOut:Z(n.data,16)}}if(55===d){let t=s[10],a=s[11];return{type:"raydium-swap-base-output",program:i,mintIn:t,mintOut:a,tokenIn:t?await q({privyClient:o,chain:e.chain,mint:t}):void 0,tokenOut:a?await q({privyClient:o,chain:e.chain,mint:a}):void 0,maxAmountIn:Z(n.data,8),amountOut:Z(n.data,16)}}throw Error("Raydium swap program instruction type ".concat(d," not supported"))}async function Q(n,t,e,o,i){var a,r,l;let s=null===(a=n.data)||void 0===a?void 0:a[0],d=null!==(r=null===(l=n.accountIndices)||void 0===l?void 0:l.map(n=>t[n]))&&void 0!==r?r:[];if([208,51,239,151,123,43,237,92].includes(s)){let t=d[5],a=d[6];return{type:"jupiter-swap-exact-out-route",program:i,mintIn:t,mintOut:a,tokenIn:t?await q({privyClient:o,chain:e.chain,mint:t}):void 0,tokenOut:a?await q({privyClient:o,chain:e.chain,mint:a}):void 0,outAmount:Z(n.data,n.data.length-1-2-8-8),quotedInAmount:Z(n.data,n.data.length-1-2-8)}}if([176,209,105,168,154,125,69,62].includes(s)){let t=d[7],a=d[8];return{type:"jupiter-swap-exact-out-route",program:i,mintIn:t,mintOut:a,tokenIn:t?await q({privyClient:o,chain:e.chain,mint:t}):void 0,tokenOut:a?await q({privyClient:o,chain:e.chain,mint:a}):void 0,outAmount:Z(n.data,n.data.length-1-2-8-8),quotedInAmount:Z(n.data,n.data.length-1-2-8)}}if([193,32,155,51,65,214,156,129].includes(s)){let t=d[7],a=d[8];return{type:"jupiter-swap-shared-accounts-route",program:i,mintIn:t,mintOut:a,tokenIn:t?await q({privyClient:o,chain:e.chain,mint:t}):void 0,tokenOut:a?await q({privyClient:o,chain:e.chain,mint:a}):void 0,inAmount:Z(n.data,n.data.length-1-2-8-8),quotedOutAmount:Z(n.data,n.data.length-1-2-8)}}throw[62,198,214,193,213,159,108,210].includes(s)&&console.warn("Jupiter swap program instruction 'claim' not implemented"),[116,206,27,191,166,19,0,73].includes(s)&&console.warn("Jupiter swap program instruction 'claim_token' not implemented"),[26,74,236,151,104,64,183,249].includes(s)&&console.warn("Jupiter swap program instruction 'close_token' not implemented"),[229,194,212,172,8,10,134,147].includes(s)&&console.warn("Jupiter swap program instruction 'create_open_orders' not implemented"),[28,226,32,148,188,136,113,171].includes(s)&&console.warn("Jupiter swap program instruction 'create_program_open_orders' not implemented"),[232,242,197,253,240,143,129,52].includes(s)&&console.warn("Jupiter swap program instruction 'create_token_ledger' not implemented"),[147,241,123,100,244,132,174,118].includes(s)&&console.warn("Jupiter swap program instruction 'create_token_account' not implemented"),[229,23,203,151,122,227,173,42].includes(s)&&console.warn("Jupiter swap program instruction 'route' not implemented"),[150,86,71,116,167,93,14,104].includes(s)&&console.warn("Jupiter swap program instruction 'route_with_token_ledger' not implemented"),[228,85,185,112,78,79,77,2].includes(s)&&console.warn("Jupiter swap program instruction 'set_token_ledger' not implemented"),[230,121,143,80,119,159,106,170].includes(s)&&console.warn("Jupiter swap program instruction 'shared_accounts_route_with_token_ledger' not implemented"),Error("Jupiter swap program instruction type ".concat(s," not supported"))}const K={component:()=>{var n,t,e,p,m,v,f,g,h,y,w;let{data:b,onUserCloseViaDialogOrKeybindRef:x,setModalData:S,navigate:C}=(0,l.a)(),{client:j,closePrivyModal:E,walletProxy:O,showFiatPrices:F}=(0,d.u)(),P=(0,s.u)(),{user:N}=(0,l.u)(),L=(0,J.u)()(null!==(n=null===b||void 0===b||null===(t=b.standardSignAndSendTransaction)||void 0===t?void 0:t.chain)&&void 0!==n?n:"solana:mainnet"),[R,M]=(0,a.useState)(null===b||void 0===b||null===(e=b.standardSignAndSendTransaction)||void 0===e?void 0:e.transaction),[z,W]=(0,a.useState)(),[V,q]=(0,a.useState)(),[Z,G]=(0,a.useState)({value:0n,isLoading:!1}),[$,Y]=(0,a.useState)(!1),[Q,K]=(0,a.useState)({}),[X,nn]=(0,a.useState)(),tn=null===b||void 0===b||null===(p=b.standardSignAndSendTransaction)||void 0===p?void 0:p.account,en=!(null===b||void 0===b||null===(m=b.standardSignAndSendTransaction)||void 0===m||!m.signOnly),on=null!==tn&&void 0!==tn&&tn.imported?(0,l.j)(N).find(n=>n.address===tn.address):(0,l.g)(N),{solPrice:an,isSolPriceLoading:rn}=(0,c.u)({enabled:F}),ln=(0,a.useMemo)(()=>{if(!z)return;let n=z.spender,t=(0,I.g)(z.fee),e=(0,I.g)(Z.value,3,!0),o=z.instructions.filter(n=>["sol-transfer","spl-transfer","raydium-swap-base-input","raydium-swap-base-output","jupiter-swap-shared-accounts-route","jupiter-swap-exact-out-route"].includes(n.type)),i=o.at(0);return!i||o.length>1?{fee:t,spender:n,balance:e}:"sol-transfer"===i.type?{fee:t,spender:n,balance:e,total:(0,I.g)(i.value)}:"spl-transfer"===i.type?{fee:t,spender:n,balance:e,total:"".concat((0,r.NJ)({amount:i.value,decimals:i.token.decimals})," ").concat(i.token.symbol)}:"raydium-swap-base-input"===i.type&&i.tokenIn&&i.tokenOut?{fee:t,spender:n,balance:e,swap:"".concat("".concat((0,r.NJ)({amount:i.amountIn,decimals:i.tokenIn.decimals})," ").concat(i.tokenIn.symbol)," \u2192 ","".concat((0,r.NJ)({amount:i.minimumAmountOut,decimals:i.tokenOut.decimals})," ").concat(i.tokenOut.symbol))}:"raydium-swap-base-output"===i.type&&i.tokenIn&&i.tokenOut?{fee:t,spender:n,balance:e,swap:"".concat("".concat((0,r.NJ)({amount:i.maxAmountIn,decimals:i.tokenIn.decimals})," ").concat(i.tokenIn.symbol)," \u2192 ","".concat((0,r.NJ)({amount:i.amountOut,decimals:i.tokenOut.decimals})," ").concat(i.tokenOut.symbol))}:"jupiter-swap-shared-accounts-route"===i.type&&i.tokenIn&&i.tokenOut?{fee:t,spender:n,balance:e,swap:"".concat("".concat((0,r.NJ)({amount:i.inAmount,decimals:i.tokenIn.decimals})," ").concat(i.tokenIn.symbol)," \u2192 ","".concat((0,r.NJ)({amount:i.quotedOutAmount,decimals:i.tokenOut.decimals})," ").concat(i.tokenOut.symbol))}:"jupiter-swap-exact-out-route"===i.type&&i.tokenIn&&i.tokenOut?{fee:t,spender:n,balance:e,swap:"".concat("".concat((0,r.NJ)({amount:i.quotedInAmount,decimals:i.tokenIn.decimals})," ").concat(i.tokenIn.symbol)," \u2192 ","".concat((0,r.NJ)({amount:i.outAmount,decimals:i.tokenOut.decimals})," ").concat(i.tokenOut.symbol))}:{fee:t,spender:n,balance:e}},[z,null===tn||void 0===tn?void 0:tn.address,Z]),sn=(0,a.useMemo)(()=>{let n;if(!z||!F||!an||rn)return;function t(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return(0,D.g)(t.reduce((n,t)=>n+t,0n),null!==an&&void 0!==an?an:0)}(null===tn||void 0===tn?void 0:tn.address)===z.spender&&(n=t(z.fee));let e=t(Z.value),o=z.instructions.filter(n=>"sol-transfer"===n.type||"spl-transfer"===n.type).at(0);return!o||z.instructions.length>1?{fee:n,balance:e}:"sol-transfer"===o.type?{fee:n,balance:e,total:t(o.value,(null===tn||void 0===tn?void 0:tn.address)===z.spender?z.fee:0n)}:"spl-transfer"===o.type?{fee:n,balance:e,total:"".concat((0,r.NJ)({amount:o.value,decimals:o.token.decimals})," ").concat(o.token.symbol)}:{fee:n,balance:e}},[z,F,an,rn,null===tn||void 0===tn?void 0:tn.address,Z]);if((0,a.useEffect)(()=>{!async function(){if(R&&j)try{q(void 0);let n=await H({tx:R,solanaClient:L,privyClient:j,checkFunds:!en});W(n)}catch(b){console.error("Failed to prepare transaction",b),q(b)}}()},[R,L,j,en]),(0,a.useEffect)(()=>{(async function(){if(!tn)return;G({value:Z.value,isLoading:!0});let{value:n}=await L.rpc.getBalance(tn.address,{commitment:"confirmed"}).send();G({value:null!==n&&void 0!==n?n:0n,isLoading:!1})})().catch(console.error)},[z]),!R||null===b||void 0===b||!b.standardSignAndSendTransaction||!tn){let n=Error("Invalid transaction request");return(0,i.jsx)(u.ErrorScreenView,{error:n,allowlistConfig:P.allowlistConfig,onRetry:()=>{var t;null!==b&&void 0!==b&&null!==(t=b.standardSignAndSendTransaction)&&void 0!==t&&t.onFailure(n),E({shouldCallAuthOnSuccess:!1})}})}let dn=()=>{var n,t,e;if(!$)return Q.signature||Q.signedTransaction?null===b||void 0===b||null===(n=b.standardSignAndSendTransaction)||void 0===n||n.onSuccess({signature:Q.signature,signedTransaction:Q.signedTransaction}):null===b||void 0===b||null===(t=b.standardSignAndSendTransaction)||void 0===t||t.onFailure(null!==(e=null!==X&&void 0!==X?X:V)&&void 0!==e?e:Error("User exited the modal before submitting the transaction")),E({shouldCallAuthOnSuccess:!1})};x.current=dn;let cn=null!==(v=b.standardSignAndSendTransaction)&&void 0!==v&&null!==(v=v.uiOptions)&&void 0!==v&&null!==(v=v.transactionInfo)&&void 0!==v&&null!==(v=v.contractInfo)&&void 0!==v&&v.imgUrl?(0,i.jsx)("img",{src:b.standardSignAndSendTransaction.uiOptions.transactionInfo.contractInfo.imgUrl,alt:b.standardSignAndSendTransaction.uiOptions.transactionInfo.contractInfo.imgAltText}):null,un=!!(b.funding&&b.funding.supportedOptions.length>0),pn=!(null!==z&&void 0!==z&&z.hasFunds)&&un;if(Q.signature||Q.signedTransaction){var mn,vn,fn,gn;let n=null===z||void 0===z?void 0:z.instructions.filter(n=>"sol-transfer"===n.type||"spl-transfer"===n.type),t=1===(null===n||void 0===n?void 0:n.length)?null===n||void 0===n?void 0:n.at(0):void 0;return(0,i.jsx)(_,{fees:null!==(mn=Q.fees)&&void 0!==mn?mn:0n,onClose:dn,transactionInfo:null===(vn=b.standardSignAndSendTransaction)||void 0===vn?void 0:vn.uiOptions.transactionInfo,solPrice:an,receiptHeader:null===(fn=b.standardSignAndSendTransaction)||void 0===fn?void 0:fn.uiOptions.successHeader,receiptDescription:null===(gn=b.standardSignAndSendTransaction)||void 0===gn?void 0:gn.uiOptions.successDescription,chain:L.chain,signOnly:en,instruction:"sol-transfer"===(null===t||void 0===t?void 0:t.type)?{to:t.toAccount,amount:t.value}:{to:(null===t||void 0===t?void 0:t.toAccount)||(null===t||void 0===t?void 0:t.toAta),total:null===ln||void 0===ln?void 0:ln.total}})}return X?(0,i.jsx)(k.T,{transactionError:X,chainId:L.chain,onClose:dn,chainType:"solana",onRetry:async()=>{nn(void 0);let{value:n}=await L.rpc.getLatestBlockhash().send();var t,e;M((t=R,e=n,(0,B.F)((0,A.fr)().decode((0,J.a)(t)),n=>(0,A.mm)(n),n=>(0,A.S$)(e,n),n=>(0,U.i5)(n),n=>new Uint8Array((0,U.l9)().encode(n)))))}}):(0,i.jsx)(k.a,{img:cn,title:(null===(f=b.standardSignAndSendTransaction)||void 0===f||null===(f=f.uiOptions)||void 0===f||null===(f=f.transactionInfo)||void 0===f?void 0:f.title)||"Confirm transaction",subtitle:(null===(g=b.standardSignAndSendTransaction)||void 0===g||null===(g=g.uiOptions)||void 0===g?void 0:g.description)||"".concat(P.name," wants your permission to approve the following transaction."),cta:pn?"Add funds":(null===(h=b.standardSignAndSendTransaction)||void 0===h||null===(h=h.uiOptions)||void 0===h?void 0:h.buttonText)||"Approve",instructions:null!==(y=null===z||void 0===z?void 0:z.instructions)&&void 0!==y?y:[],network:"solana:mainnet"==L.chain?"Solana":L.chain.replace("solana:",""),blockExplorerUrl:L.blockExplorerUrl,total:F?null===sn||void 0===sn?void 0:sn.total:null===ln||void 0===ln?void 0:ln.total,fee:F?null===sn||void 0===sn?void 0:sn.fee:null===ln||void 0===ln?void 0:ln.fee,balance:F?null===sn||void 0===sn?void 0:sn.balance:null===ln||void 0===ln?void 0:ln.balance,swap:null===ln||void 0===ln?void 0:ln.swap,transactingWalletAddress:tn.address,disabled:!(null!==z&&void 0!==z&&z.hasFunds)&&!un,isSubmitting:$,isPreparing:!z||Z.isLoading,isTokenPriceLoading:F&&rn,isMissingFunds:!(null!==z&&void 0!==z&&z.hasFunds),submitError:null!==X&&void 0!==X?X:void 0,isSponsored:!(null===(w=b.standardSignAndSendTransaction)||void 0===w||!w.isSponsored),parseError:V,onClick:pn?async()=>{if(!tn)return;if(!un)throw Error("Funding wallet is not enabled");let n="FundingMethodSelectionScreen";S((0,o.A)((0,o.A)({},b),{},{funding:(0,o.A)((0,o.A)({},b.funding),{},{methodScreen:n}),solanaFundingData:null===b||void 0===b?void 0:b.solanaFundingData})),C(n)}:async()=>{try{if(Y(!0),$||!tn||!O||!N||!on)return;let n=await b.standardSignAndSendTransaction.onConfirm(R);if("signature"in n){let t=await async function(n,t,e){let{solanaClient:o,signature:i}=n,a=(0,T.BC)().decode(i),r=await o.rpc.getTransaction(a,{maxSupportedTransactionVersion:0,commitment:"confirmed",encoding:"base64"}).send().catch(()=>null);return r?{fee:null!==(t=null===(e=r.meta)||void 0===e?void 0:e.fee)&&void 0!==t?t:0n}:null}({solanaClient:L,signature:n.signature});return void K((0,o.A)((0,o.A)({},n),{},{fees:null===t||void 0===t?void 0:t.fee}))}K(n)}catch(b){console.warn({transaction:R,error:b}),nn(b)}finally{Y(!1)}},onClose:dn})}}},94199(n,t,e){e.d(t,{u:()=>a});var o=e(58661),i=e(14766);const a=function(){let{enabled:n=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{showFiatPrices:t,getUsdPriceForSol:e}=(0,i.u)(),[a,r]=(0,o.useState)(!0),[l,s]=(0,o.useState)(void 0),[d,c]=(0,o.useState)(void 0);return(0,o.useEffect)(()=>{(async()=>{if(t&&n)try{r(!0);let n=await e();n?c(n):s(Error("Unable to fetch SOL price"))}catch(o){s(o)}finally{r(!1)}else r(!1)})()},[]),{solPrice:d,isSolPriceLoading:a,solPriceError:l}}}}]);